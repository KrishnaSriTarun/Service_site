generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

// ------------------- USER -------------------
model User {
  id        String    @id @default(auto()) @map("_id") @db.ObjectId
  name      String
  phone     String?
  email     String?
  role      String    @default("customer")
  createdAt DateTime  @default(now())

  bookings  Booking[] @relation("UserBookings")
}

// ------------------- PROVIDER -------------------
model Provider {
  id         String    @id @default(auto()) @map("_id") @db.ObjectId
  userId     String    @db.ObjectId
  name       String
  category   String
  experience Int?
  price      Float?
  photoUrl   String?
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt

  bookings   Booking[] @relation("ProviderBookings")
}

// ------------------- BOOKING -------------------
model Booking {
  id          String    @id @default(auto()) @map("_id") @db.ObjectId

  customerId  String    @db.ObjectId
  providerId  String    @db.ObjectId

  // relations
  customer    User      @relation("UserBookings", fields: [customerId], references: [id])
  provider    Provider  @relation("ProviderBookings", fields: [providerId], references: [id])

  status      String    @default("pending")
  address     String
  description String
  price       Float
  createdAt   DateTime  @default(now())
  completedAt DateTime?
}
